<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.console && console.log('foo');
    </script>
    <meta charset="utf-8" />
    <link rel="icon" href="../assets/favicon.png" />
    <title>beapopro7</title>
    <link rel="stylesheet" type="text/css" href="../prism.css">
    <script>var _gaq = [['_setAccount', 'UA-33746269-1'], ['_trackPageview']];</script>
    <script src="https://www.google-analytics.com/ga.js" async></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="150 words">
    <meta name="author" content="uipasta">
    <meta name="url" content="http://www.yourdomainname.com">
    <meta name="copyright" content="company name">
    <meta name="robots" content="index,follow">
    <title>PeaPoPro</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="../images/favicon/apple-touch-icon.png">
    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugin.css">
    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">
    <!-- Syntax Highlighter  -->
    <link rel="stylesheet" type="text/css" href="../css/syntax/shCore.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax/shThemeDefault.css">
    <link href="https://fonts.googleapis.com/css2?family=Cardo&family=Lemonada:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../style.css" />
</head>

<body>
    <!-- Preloader Start -->
    <div class="preloader">
        <div class="rounder"></div>
    </div>
    <!-- Preloader End -->
    <div id="main">
        <div class="container">
            <div class="row">
                <div id="interface_ifrm_me">
                </div>
                <div class="col-md-9">
                    <div class="col-md-12 page-body">
                        <div class="row">
                            <div class="sub-title">
                                <a href="index.html" title="Go to Home Page">
                                    <h2>Back Home</h2>
                                </a>
                            </div>
                            <div class="col-md-12 content-page">
                                <div class="col-md-12 blog-post">
                                    <div id="text_content">
                                        <div class="post-title">
            <h1>Load Content while Scrolling with Jquery Ajax PHP</h1>
        </div>

        <!-- Post Headline End -->
        <!-- Post Detail Start -->

        <div class="post-info">
          <span>2021.04.05 by <a href="#" target="_blank">Murad Shaker</a></span>
        </div>

        <!-- Post Detail End -->
        <p></p>

         <div class="code">

              
            <div id="delete0" class="review_code"><p id="0" class=" delete_review_code hide0">First we have define two div tag, in one tag we will display table content in HTML format and in second div tag we will display one button with text like please wait.</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><div id="load_data"></div>
  <div id="load_data_message"></div></pre></div><count></count></div><div id="delete1" class="review_code"><p id="1" class=" delete_review_code hide1">In JQuery we have make on function that fetch data from table and display on web page in specified div tag. In this function we have use Ajax request that fetch data from table and convert them to html format and display on web page.</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"> var limit=7;
 var start=0;
 var action="inactive";
 function View_country_information(limit , start)
 {
   $.ajax({
     url:"fetch.php",
     method:"post",
     data:{limit:limit , start:start},
     cache:false,
     success:function(data)
     {
       $("#load_data").append(data);
       if (data == '') 
       {
         $('#load_data_message').html("<button type="button" class="btn btn-info">No Data Found</button>");
         action='active';
       }else{
         $('#load_data_message').html("<button type="button" class="btn btn-warning">Please Wait....</button>");
         action='inactive';
       }
     }
   });
 }</pre></div><count></count></div><div id="delete2" class="review_code"><p id="2" class=" delete_review_code hide2">After making of function then after we want to display on data on web page by calling above function, so we have write one if condition which check if action variable value will be inactive then it will execute if block and under this we have called above function and in this block we have also change action variable value will change to active.
</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js">if (action == "inactive") 
    {
     active="active";
     View_country_information(limit , start);
    }
</pre></div><count></count></div><div id="delete3" class="review_code"><p id="3" class=" delete_review_code hide3">Then after we have go to PHP page and this page has been received request from Ajax with two variable like limit and start and based on this variable value we will make simple select query which fetch data from table and then after it will convert into HTML format and send back data to Ajax request and Ajax request will display on web page.
</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php
if (isset($_POST['limit'] , $_POST['start'])) 
   {
   $connect=mysqli_connect('localhost','root','','jqueryinfinitescroll');
   $query = "SELECT * FROM country ORDER BY id DESC LIMIT ".$_POST["start"].", ".$_POST["limit"]."";

   $result = mysqli_query($connect, $query);
   while($row = mysqli_fetch_array($result))
     {
      echo '
       <h3-->'.$row["name"].'
       <p>'.$row["about"].'</p>
       <p class="text-muted" align="right">By - '.$row["name"].'</p>
       <hr>';
     }
   }
?&gt;</pre></div><count></count></div><div id="delete6" class="review_code"><p id="6" class=" delete_review_code hide6">
Now we want to write jquery code when page has been scroll so we have write jquery scroll() event, so when page has been scroll then this event of code will be fire. Under this block we have write if condition which check if height of div tag with $load_data has been greater than windows height and it also check action variable value must be inactive. If this condition will true then it will execute if block and under this block we have first change action variable value must be change to active and we have also increase the start variable value increase by value of limit variable. After this we have called load_country_data(limit, start) function under setTimeout() function for called this function for waiting of one second.
</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"> $(window).scroll(function(){
  if($(window).scrollTop() + $(window).height() &gt; $("#load_data").height() &amp;&amp; action == 'inactive')
     {
     action = 'active';
     start = start + limit;
     setTimeout(function(){
     View_country_information(limit, start);
     },1000);
     }
   });</pre></div><count></count></div>      
         </div>
                                    </div>
                                    <div id="pro_f">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Footer Start -->
                    <div class="col-md-12 page-body margin-top-50 footer">
                    </div>
                    <!-- Footer End -->
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="scroll-to-top"><i class="fa fa-long-arrow-up"></i></a>
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/plugin.js"></script>
    <script type="text/javascript" src="../js/scripts.js"></script>
    <script type="text/javascript" src="../js/syntax/shCore.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushCss.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushJScript.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPhp.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPlain.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPython.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushRuby.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushSql.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushVb.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushXml.js"></script>
    <script type="text/javascript" src="prism.js"></script>
    <script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '../js/syntax/clipboard.swf';
    SyntaxHighlighter.all();

    $("#pro_f").load('../pro_f.html');
    $(".footer").load('../footer.html');
    $("#interface_ifrm_me").load('../interface_ifrm_me.html');
    </script>
</body>
</html>