<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.console && console.log('foo');
    </script>
    <meta charset="utf-8" />
    <link rel="icon" href="../assets/favicon.png" />
    <title>beapopro7</title>
    <link rel="stylesheet" type="text/css" href="../prism.css">
    <script>var _gaq = [['_setAccount', 'UA-33746269-1'], ['_trackPageview']];</script>
    <script src="https://www.google-analytics.com/ga.js" async></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="150 words">
    <meta name="author" content="uipasta">
    <meta name="url" content="http://www.yourdomainname.com">
    <meta name="copyright" content="company name">
    <meta name="robots" content="index,follow">
    <title>PeaPoPro</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="../images/favicon/apple-touch-icon.png">
    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugin.css">
    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">
    <!-- Syntax Highlighter  -->
    <link rel="stylesheet" type="text/css" href="../css/syntax/shCore.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax/shThemeDefault.css">
    <link href="https://fonts.googleapis.com/css2?family=Cardo&family=Lemonada:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../style.css" />
</head>


<body>
    <!-- Preloader Start -->
    <div class="preloader">
        <div class="rounder"></div>
    </div>
    <!-- Preloader End -->
    <div id="main">
        <div class="container">
            <div class="row">
                <div id="interface_ifrm_me">
                </div>
                <div class="col-md-9">
                    <div class="col-md-12 page-body">
                        <div class="row">
                            <div class="sub-title">
                                <a href="index.html" title="Go to Home Page">
                                    <h2>Back Home</h2>
                                </a>
                            </div>
                            <div class="col-md-12 content-page">
                                <div class="col-md-12 blog-post">
                                    <div id="text_content">
                                        <div class="post-title">
            <h1>How to show related posts similar to the current post USING PHP Mysqli</h1>
        </div>

        <!-- Post Headline End -->
        <!-- Post Detail Start -->

        <div class="post-info">
          <span>2021.06.30 by <a href="#" target="_blank">Murad Shaker</a></span>
        </div>

        <!-- Post Detail End -->
        <p></p>

         <div class="code">

              
            <div id="delete0" class="review_code"><p id="0" class=" delete_review_code hide0">mysqli.php
database connection
</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php 
 $connect=new mysqli('localhost','root','','text');
?--></pre></div><count></count></div><div id="delete1" class="review_code"><p id="1" class=" delete_review_code hide1">a file
inedx.php
This file uploads the image, writes the text, and sends it to
mysqli
by
ajax,
specifically to a file
insert.php
It also displays posts that you have shared
by function
fetch_img_text
ajax,
to me
fetch.php file,
He also sends the participation, to us in format
html and displayed
at
</p><div class="row">
<br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js">


  <meta charset="utf-8">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>


   <div class="container" id="tourpackages-carousel">
     <form>
      <div class="form-group">
        <label for="img">Choose a picture</label>
        <input type="file" class="form-control-file" id="img" name="img">

        <label for="text">Enter text around the image</label>
        <textarea class="form-control" id="text" name="text"></textarea>
      </div>
      <button type="submit" id="Insert" class="btn btn-primary">Insert</button>
         <div id="sc">
            
         </div>
     </form>
       <br>
       <br>
     <div class="row">
             
     </div>
    </div>

<script type="text/javascript">
   $(document).ready(function(){
     $('form').submit(function(e){

         e.preventDefault();
         
         var data=new FormData(this);

         $.ajax({
             url:"insert.php",
             type:"post",
             data:data,
             processData:false,
             contentType:false,
             cache:false,
             success:function(data)
             {
                $("#sc").text(data);
                fetch_img_text();
             }
         });
      });

     fetch_img_text();
     function fetch_img_text()
     {
        $.ajax({
            url:"fetch.php",
            success:function(data)
            {
               $(".row").html(data);
            }
        });
     }
   });
</script>
</pre></div><count></count></div></div><div id="delete2" class="review_code"><p id="2" class=" delete_review_code hide2">a file
insert.php
This query inserts the image and text, coming from
 index.php file, to our table</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php 
 include 'mysqli.php';

 $imagepath=$_FILES['img']['tmp_name'];

 $name_main=pathinfo($imagepath,PATHINFO_EXTENSION);

 $data_image=file_get_contents($imagepath);

 $image_encode=base64_encode($data_image);

 $img='data:image/'.$name_main.';base64,'.$image_encode;


 $sql="INSERT INTO `text_img`(`text`, `img`) 
                      VALUES ('".$_POST['text']."','".$img."')";

 if ($connect--->query($sql)) 
 {
  echo "successfully inserted";
 }
?&gt;</pre></div><count></count></div><div id="delete3" class="review_code"><p id="3" class=" delete_review_code hide3">a file
a file
fetch.php
Query this file displays posts
and send it to a file
index.php
in . format
html file
using
ajax</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php 
 include 'mysqli.php';

 $sql="SELECT * FROM `text_img`";

 $result=$connect--->query($sql);

 while ($row = $result-&gt;fetch_assoc()) 
 {
   ?&gt;
      <div class="col-xs-18 col-sm-6 col-md-3">
       <div class="thumbnail">
        <img src="<?php echo $row['img'];?>" class="thumb">
              <div class="caption">
                <p><!--?php echo $row['text']; ?--></p>
                <form action="img_text.php" method="post">
                  <label for="move<?php echo $row['id'];?>">
                      <p><a class="btn btn-info btn-xs" role="button">view</a></p>
                  </label>
                   <input type="submit" id="move<?php echo $row['id'];?>" style="display:none;">

                   <input type="hidden" name="text" value="<?php echo $row['text'];?>">

                   <input type="hidden" name="img" value="<?php echo $row['img'];?>">
                </form>
            </div>
          </div>
        </div>
   <!--?php
      }
     ?--></pre></div><count></count></div><div id="delete6" class="review_code"><p id="6" class=" delete_review_code hide6">a file
img_text.php
It is the basis of our topic
Where this file displays the current job
It also displays posts related to the current post.
# But have you ever thought about how to display similar posts,
First, I tell you, related posts are shown based on the number of similar words between a series
$_POST["text"],
And between the chains
$ row ['text']
Far from being the same as the picture,
Don't worry, I'll explain it to you
make d
$text_o = explode("", $text);
first
By making all the words of the string $_post ['text'] into an array
This makes each word a value in the array
And therefore
Action
$text_m = explode("", $row ['text']);
Similar to the first method but this makes the words $row['text'] in the array and not $_post['text'],
and this thing,
$diff_string = array_diff ($text_o, $text_m);
Displays the different words in the array $text_o,
and the matrix
$text_m,
$val_str_new = str_replace($diff_string, '', $text);
This function returns a new string devoid of word difference.
The difference between $row ['text'] and $_post ['text']
Filtered by job
str_replace,
Returns a new string devoid of different words
As for the
cipher
$count_num_string = str_word_count ($text)/2;
Gives a number that is half the number of words in the string
$_POST['text'] , for the function,
str_word_count ($val_str_new)
Gives a number, which is the number of words, in the new string
As for the condition?
if(str_word_count($val_str_new)&gt; = $count_num_string)
This condition states if the number of the new string is greater than the number of the half-string $_POST ['text'] , where if the number of the new string is greater than the number of the text of the string $_POST ['text'], it will display it as a post, the same
:::: Additional clarification: This shows if the words half of the text string $_POST['text'] , are the same as the new string, in some words,
The post will be displayed similar to the current post</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js">


  <meta charset="utf-8">
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
     <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js"></script>
     <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>


  <!--?php include 'mysqli.php'; ?-->
  <div class="container">
     <br>
     <br>
     <br>
    <div class="row">
      <div class="col-md-5 col-lg-5">
        <div class="featured-article">
           <img src="<?php echo $_POST['img'];?>">
          <div class="block-title">
            <h2><!--?php echo $_POST['text'];?--></h2>
          </div>
        </div>
      </div>
    </div>
    <!--?php echo text_si($connect,$_POST['text']);?-->
  </div>



<!--?php  
 function text_si($connect,$text)
 {
   $sql="SELECT * FROM `text_img` where `text` != '".$text."'";

   $result=$connect--->query($sql);

   while ($row = $result-&gt;fetch_assoc()) 
   {
      $text_o=explode(" ",$text);

      $text_m=explode(" ",$row['text']);

      $diff_string=array_diff($text_o,$text_m);

      $val_str_new=str_replace($diff_string,'',$text);

      //Gives a number half the number of words in the string
      $count_num_string=str_word_count($text)/2;
     
      echo $val_str_new."<br>";
        }
      }
 ?&gt;</pre></div><count></count></div>    
         </div>
                                    </div>
                                    <div id="pro_f">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Footer Start -->
                    <div class="col-md-12 page-body margin-top-50 footer">
                    </div>
                    <!-- Footer End -->
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="scroll-to-top"><i class="fa fa-long-arrow-up"></i></a>
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/plugin.js"></script>
    <script type="text/javascript" src="../js/scripts.js"></script>
    <script type="text/javascript" src="../js/syntax/shCore.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushCss.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushJScript.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPhp.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPlain.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPython.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushRuby.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushSql.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushVb.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushXml.js"></script>
    <script type="text/javascript" src="prism.js"></script>
    <script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '../js/syntax/clipboard.swf';
    SyntaxHighlighter.all();

    $("#pro_f").load('../pro_f.html');
    $(".footer").load('../footer.html');
    $("#interface_ifrm_me").load('../interface_ifrm_me.html');
    </script>
</body>
</html>