<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        window.console && console.log('foo');
    </script>
    <meta charset="utf-8" />
    <link rel="icon" href="../assets/favicon.png" />
    <title>beapopro7</title>
    <link rel="stylesheet" type="text/css" href="../prism.css">
    <script>var _gaq = [['_setAccount', 'UA-33746269-1'], ['_trackPageview']];</script>
    <script src="https://www.google-analytics.com/ga.js" async></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="150 words">
    <meta name="author" content="uipasta">
    <meta name="url" content="http://www.yourdomainname.com">
    <meta name="copyright" content="company name">
    <meta name="robots" content="index,follow">
    <title>PeaPoPro</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="144x144" type="image/x-icon" href="../images/favicon/apple-touch-icon.png">
    <!-- All CSS Plugins -->
    <link rel="stylesheet" type="text/css" href="../css/plugin.css">
    <!-- Main CSS Stylesheet -->
    <link rel="stylesheet" type="text/css" href="../css/style.css">
    <!-- Google Web Fonts  -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,300,500,600,700">
    <!-- Syntax Highlighter  -->
    <link rel="stylesheet" type="text/css" href="../css/syntax/shCore.css">
    <link rel="stylesheet" type="text/css" href="../css/syntax/shThemeDefault.css">
    <link href="https://fonts.googleapis.com/css2?family=Cardo&family=Lemonada:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../style.css" />
</head>

<body>
    <!-- Preloader Start -->
    <div class="preloader">
        <div class="rounder"></div>
    </div>
    <!-- Preloader End -->
    <div id="main">
        <div class="container">
            <div class="row">
                <div id="interface_ifrm_me">
                </div>
                <div class="col-md-9">
                    <div class="col-md-12 page-body">
                        <div class="row">
                            <div class="sub-title">
                                <a href="index.html" title="Go to Home Page">
                                    <h2>Back Home</h2>
                                </a>
                            </div>
                            <div class="col-md-12 content-page">
                                <div class="col-md-12 blog-post">
                                    <div id="text_content">
                                        <div class="post-title">
            <h1>How to create a view count system, using php and jquery</h1>
        </div>

        <!-- Post Headline End -->
        <!-- Post Detail Start -->

        <div class="post-info">
          <span>2021-02-18 by <a href="#" target="_blank">Murad Shaker</a></span>
        </div>

        <!-- Post Detail End -->
        <p></p>
        
         <div class="code">

              
            <div id="delete0" class="review_code"><p id="0" class=" delete_review_code hide0">This file makes a connection in the database</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

  $connect = new PDO("mysql:host=localhost;dbname=count_view", "root", "");

?--></pre></div><count></count></div><div id="delete1" class="review_code"><p id="1" class=" delete_review_code hide1">Copy this code and place it in your php, name it register.php, this is the user registration code
It is easy and simple and does not need further explanation</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js">


    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="css/style.css">



    <div class="main">
        <h1>Register</h1>
        <div class="container">
            <div class="sign-up-content">
                    <h2 class="form-title">What type of user are you ?</h2>
                    <div id="text_mass">
                        
                    </div>

                    <div class="form-textbox">
                        <label for="username">Username</label>
                        <input type="text" name="username" id="username">
                    </div>

                    <div class="form-textbox">
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password">
                    </div>

                    <label for="password_2">Retype password</label>
                    <div class="form-textbox">
                        <input type="password" name="password_2" id="password_2">
                    </div>
                    <br>
                    <div class="form-textbox">
                        <input type="submit" name="submit" id="insert_data" class="submit" value="Create account">
                    </div>

                <p class="loginhere">
                    Already have an account ?<a href="login.php" class="loginhere-link"> Log in</a>
                </p>
            </div>
        </div>
    </div>

    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="js/main.js"></script>

   

    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
    $( document ).ready(function() {
       
        $(document).on("click","#insert_data",function(){
           
                var username=$("#username").val();
                var password=$("#password").val();
                var password_2=$("#password_2").val();
                if (username != ""){
                
                if (password != "" && password_2 != "") 
                {

                if (password == password_2)
                {

                $.ajax({

                    url:"insert_data_register.php",
                    type:"post",
                    data:{username:username,password:password},
                    success:function(data)
                    {
                      $("#text_mass").html(data);
                    }
                });
                }else{
                       $("#text_mass").html('<h2 style="color:red;" class="form-title">Password does not match</h2>');
                }
                }else{
                   $("#text_mass").html('<h2 style="color:red;" class="form-title">Please fill in the password fields correctly</h2>');
                }
                }else{
                
                       $("#text_mass").html('<h2 style="color:red;"  class="form-title">please add username</h2>');
              }
             });
           });
    </script>

</pre></div><count></count></div><div id="delete3" class="review_code"><p id="3" class=" delete_review_code hide3">Name the file insert_data register.php, put in this code, this code 
imports the username and password from the register.php file, and 
specifically inserts them into the database into the register_user
 table.</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

include 'mysqli.php';

  $query='SELECT * FROM `register_user` 
  WHERE username =  "'.$_POST['username'].'"';

  $stm=$connect--->prepare($query);
  $stm-&gt;execute();
  $rowCount=$stm-&gt;rowCount();
  $fatch_infrm=$stm-&gt;FetchAll();

  if ($rowCount ==  0) 
  {
    $query="
    INSERT INTO `register_user`(`username`,`password`) 
    VALUES ('".$_POST['username']."','".$_POST['password']."')";

   $stm=$connect-&gt;prepare($query);
   
   if ($stm-&gt;execute()) 
   {
     echo '<h2 style="color:blue;" class="form-title">successfully registered</h2>';
   }

  }else{
    echo '<h2 style="color:red;" class="form-title">This information is pre-recorded</h2>';
  }

?&gt;</pre></div><count></count></div><div id="delete4" class="review_code"><p id="4" class=" delete_review_code hide4">Copy this code and put it in a file and name it login.php, 
this file is to enter the previous username and password, 
you do not need to create a new account, 
and this file is understandable and simple
There is no need to explain further</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"> 


    <link rel="stylesheet" href="fonts/material-icon/css/material-design-iconic-font.min.css">
    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <link rel="stylesheet" href="css/style.css">



    <div class="main">

        <h1>Login</h1>
        <div class="container">
            <div class="sign-up-content">
                    <h2 class="form-title">Enter your information</h2>
                    <div id="text_mass">
                    </div>
                    <div class="form-textbox">
                        <label for="username">Username</label>
                        <input type="text" name="username" id="username">
                    </div>

                    <div class="form-textbox">
                        <label for="password">Password</label>
                        <input type="password" name="password" id="password">
                    </div>

                    <div class="form-textbox">
                        <input type="submit" name="submit" id="insert_data_login" class="submit" value="Login">
                    </div>

                </div>
         </div>
    </div>

    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="js/main.js"></script>

   

    <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script>
    $( document ).ready(function() {
       
        $(document).on("click","#insert_data_login",function(){
           
                var username=$("#username").val();
                var password=$("#password").val();
                var password_2=$("#password_2").val();
                if (username != ""){
                
                if (password != "") 
                {

                $.ajax({

                    url:"insert_data_login.php",
                    type:"post",
                    data:{username:username,password:password},
                    success:function(data)
                    {
                      $("#text_mass").html(data);
                    }
                });
                }else{
                   $("#text_mass").html('<h2 style="color:red;" class="form-title">Please fill in the password fields correctly</h2>');
                }
                }else{
                
                    $("#text_mass").html('<h2 style="color:red;"  class="form-title">please add username</h2>');
               }
             });
           });
    </script>

</pre></div><count></count></div><div id="delete5" class="review_code"><p id="5" class=" delete_review_code hide5">Copy this code and place it on the php page, and name it to 
insert_data_login.php, this file receives the username and password and 
checks whether the information is not present in the register_user table 
In this case, the login is not accepted, and if the information matches 
the previous registration information, it is The registration is correct 
and saves a user ID in the SESSION session, and this session is useful 
for us to deal with the next investigations</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

  
  include 'mysqli.php';

  session_start();

  $query='SELECT * FROM `register_user` 
  WHERE username =  "'.$_POST['username'].'"';

  $stm=$connect--->prepare($query);
  $stm-&gt;execute();
  $rowCount=$stm-&gt;rowCount();
  $fatch_infrm=$stm-&gt;FetchAll();

  if ($rowCount ==  0) 
  {
    echo '<h2 style="color:red;" class="form-title">Please enter your information correctly</h2>';
  }else{

     foreach ($fatch_infrm as $row) 
     {
       $_SESSION['user_id']=$row['user_id'];
       header('location: index.php');
     }
  }
?&gt;</pre></div><count></count></div><div id="delete6" class="review_code"><p id="6" class=" delete_review_code hide6">Copy this file and place it in php and name it index.php. In this code, 
there is an investigation. If the person is logged in or not logged in. 
If not logged in, it will be taken directly to the register.php page. 
This investigation is done via a session that saves the user ID.
</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

session_start();

 if (isset($_SESSION['user_id']) == "") 
    {
      header('location:register.php');
    }
  ?-->


   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">


<div class="card text-center">
  <div class="card-header">
    Simple form
  </div>
  <div class="card-body">
    <p class="card-text">A counter system to count the number of people who viewed the image
  </p>
    <a href="view_img.php" class="btn btn-primary">Watch the picture</a>
  </div>
</div>

</pre></div><count></count></div><div id="delete8" class="review_code"><p id="8" class=" delete_review_code hide8">This important file is the basis of our topic, copy this code and place 
it in the php file, and name it view_img.php, this file displays the 
image and the number of people who viewed the image, and you can also 
display their names, and there are many investigations, simple, try to 
test yourself and understand it</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php include 'mysqli.php'; 

session_start();
?-->


   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
   <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js" type="text/javascript"></script>
 
 

  <!--?php
    
    $query='
    SELECT * FROM `count`
    INNER JOIN register_user
    ON count.user_id = register_user.user_id;
    ';

    $stm=$connect--->prepare($query);
    $stm-&gt;execute();
    $rowCount=$stm-&gt;rowCount();
    $fetch_user_view=$stm-&gt;FetchAll();

  ?&gt;

<section class="section mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-6">
        <div>
          <img alt="Web Studio" class="img-fluid" src="img.jpeg">
        </div>
      </div>
      <div class="col-md-6 col-lg-5 ml-auto d-flex align-items-center mt-4 mt-md-0">
        <div>
          <h2>Views =<!--?php echo $rowCount;?--></h2>
          <p class="margin-top-s">
            <img src="count.png" style="width:55px;">
          </p>
          <!--?php
           if (isset($_SESSION['user_id']) == "") 
            {
            echo '<a href="register.php"-->register';
            }else{
            echo '<a href="logout.php">logout</a>';
            }
         ?&gt;
         <br>
         <!--?php
      if ($rowCount != 0) 
         {

         if (isset($_SESSION['user_id'])!= "")
            {

           ?-->
         <button class="nav-link  dropdown-toggle" data-toggle="dropdown">Show users who saw</button>
         <!--?php

            }
         }
         ?-->
          <ul class="dropdown-menu">
            <!--?php
              foreach ($fetch_user_view as $row) 
              {

                if ($row['user_id'] == $_SESSION['user_id']) 
                {
                  $I_am_the_viewer=" (You) ";
                  
                }else{

                  $I_am_the_viewer="";
                }

                ?-->
                 <li><a class="dropdown-item" href="#"><!--?php echo $row['username']
                 .$I_am_the_viewer;?--></a></li>
                <!--?php
              }
            ?-->
          </ul>
        </div>
      </div>
      <!--?php
         if (isset($_SESSION['user_id']) == "") 
         {
           echo "<h2 style='color:red;''-->Your value can only be considered as a viewer when you are logged in";
         }
      ?&gt;
    </div>
  </div>
</section>

<script type="text/javascript">
  insert_count_view_img();
  function insert_count_view_img() 
  {
   $.ajax({
     url:"insert_count_view_img.php",
   });
  }
</script>



</pre></div><count></count></div><div id="delete10" class="review_code"><p id="10" class=" delete_review_code hide10">
Copy this code and place it in the insert_count_view_img.php file. , 
This code inserts the ID of the people who viewed the images in the 
count table, which came from the view_img.php file specifically from 
the Insert_count_view_img function, using the ajax command, and there 
is in this file an investigation. If you see the image once, based on 
the identifier, it cannot Insert the value into the table a second time</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

 include 'mysqli.php';
 session_start();

 $query='SELECT * FROM `count` 
  WHERE user_id="'.$_SESSION['user_id'].'"';

  $stm=$connect--->prepare($query);
  $stm-&gt;execute();
  $rowCount=$stm-&gt;rowCount();

  if ($rowCount == 0) 
  {
     $query="
       INSERT INTO `count`(count_view,user_id) 
       VALUES ('".$_SESSION['user_id']."','".$_SESSION['user_id']."')";

       $stm=$connect-&gt;prepare($query);
       $stm-&gt;execute();
  }
?&gt;</pre></div><count></count></div><div id="delete11" class="review_code"><p id="11" class=" delete_review_code hide11">Name this code logout.php, the current account will be logged out, by 
destroying the session, and taken directly to the good account creation 
page, register.php</p><br><br><div class="margin-top-40margin-bottom-40"><pre class="brush:js"><!--?php

session_start();

session_destroy();

header('location:register.php');

?--></pre></div><count></count></div>      
         </div>
                                    </div>
                                    <div id="pro_f">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Footer Start -->
                    <div class="col-md-12 page-body margin-top-50 footer">
                    </div>
                    <!-- Footer End -->
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="scroll-to-top"><i class="fa fa-long-arrow-up"></i></a>
    <script type="text/javascript" src="../js/jquery.min.js"></script>
    <script type="text/javascript" src="../js/plugin.js"></script>
    <script type="text/javascript" src="../js/scripts.js"></script>
    <script type="text/javascript" src="../js/syntax/shCore.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushCss.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushJScript.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPerl.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPhp.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPlain.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushPython.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushRuby.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushSql.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushVb.js"></script>
    <script type="text/javascript" src="../js/syntax/shBrushXml.js"></script>
    <script type="text/javascript" src="prism.js"></script>
    <script type="text/javascript">
    SyntaxHighlighter.config.clipboardSwf = '../js/syntax/clipboard.swf';
    SyntaxHighlighter.all();

    $("#pro_f").load('../pro_f.html');
    $(".footer").load('../footer.html');
    $("#interface_ifrm_me").load('../interface_ifrm_me.html');
    </script>
</body>
</html>